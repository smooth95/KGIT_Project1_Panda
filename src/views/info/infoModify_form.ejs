<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
    crossorigin="anonymous"
  />
<script src="/resources/js/info/image_read.js"></script>
<link href="/resources/css/info/infoModify_form.css" rel="stylesheet" >


</head>
<body>
  <div id="root">
        <div class="sc-dwnQUR hTVvhi">
            <div class="sc-hTRxPa kSLomz">
                <div class="sc-hsGlKL fWLIcp">
                    <div class="sc-bWOGAC dRRXYQ">
                        <header class="sc-dEVLtl hmAwfM">
                            <div class="sc-vrePNt dBKVWZ">
                                <img src="/resources/upload/왼쪽화살표.jpg" alt="뒤로가기" 
                                onclick="location.href='/info/productM'">
                            </div>
                            <h1 class="sc-gJqSRm fjwjkl"></h1>
                      
                            </header>
                        </div>
                    </div>
                    
                    
                    <div class="sc-fJNrnh hZcALW">

                        <div class="sc-cSyrqk GDyfg">회원정보수정</div>

                        <form id= "modifyForm" action="/info/modify" method="post" enctype="multipart/form-data" >
                        
                          
                          <table class="table">
                                <% profile.forEach(info=>{ %>
                                <tbody>
                                  <tr style="display: none;">
                                    <th scope="row" class="highlight">아이디</th>
                                    <td><input type="text"  readonly name="id" value="<%= info.INFO_ID %>" ></td>
              
                                  </tr>
                                  <tr>
                                    <th scope="row" class="highlight">이름</th>
                                    <td><input type="text" name="name" id= "nameInput<%= info.name %>" placeholder="이름 입력"></td>
              
                                  </tr>
                                  <tr>
                                    
                                    <th scope="row" class="highlight">비밀번호 변경</th>
                                    <td><input type="text" name="pw" placeholder="변경비밀번호 입력"> </td>
                                  </tr>
             
                                        <th scope="row" class="highlight">주소</th>
                                        <td><input type="text" id = "addrInput<%= info.addr %>" name="addr" placeholder="주소 입력"> </td>
                                      </tr>

                                      <tr>
                                        <th scope="row" class="highlight">휴대폰번호</th>
                                        <td><input type="text" id ="phoneNumberInput<%= info.num %>" name="phone" placeholder="휴대폰번호 입력"> </td>
                                      </tr>

                                      <tr>
                                        <th scope="row" class="highlight">프로필 수정</th>
                                        <td>     
                                          <div class="fbrlWN">
                                            <input type="file" name="image_file_name" onchange="readURL(this);">
                                            <div id="img-container">
                                              
                                     
                                              <% if(info.INFO_IMG) { %>
                                                <img id="img" src="/resources/upload/<%= info.INFO_IMG %>" alt="프로필 이미지">
                                            <% } else { %>
                                                <!-- 프로필 이미지가 없는 경우 기본 이미지 표시 -->
                                                <img id="img"src="/resources/upload/panda_p.png" alt="기본 이미지">
                                            <% } %>

                                            </div>  
                                          </td>
                                        </tr>
                                      </div>
                                      
                                    </td>
                                  </tr>
                                </tbody>
                                <% }) %>
                              </table>


                              <% profile.forEach(info=>{ %>

                             
                                <div class="gczMwZ">
                                  <div class="button-container">
                                    <input type="button" class="deleteInfo-link" onclick="location.href='/info/delete?info_id=<%= info.INFO_ID %>'" value="탈퇴">
      
                          </div>

                          <div class="button-container">
                            <button type="button" class="fHBotQ"
                            onclick="submitForm()">수정</button>

                          </div>
                        </div>                 
       <% }) %>
        </form>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
    crossorigin="anonymous"
  ></script>

  <script>
    // JavaScript를 사용하여 placeholder를 동적으로 설정
     <%profile.forEach(info=>{ %>
      let phoneNumberInput<%= info.num %> = document.getElementById('phoneNumberInput<%= info.num %>');
      phoneNumberInput<%= info.num %>.placeholder = '<%= info.INFO_PHONE %>';

      let addrInput<%= info.addr %> = document.getElementById('addrInput<%= info.addr %>');
      addrInput<%= info.addr %>.placeholder = '<%= info.INFO_REGION %>';

      let nameInput<%= info.name %> = document.getElementById('nameInput<%= info.name %>');
      nameInput<%= info.name %>.placeholder = '<%= info.INFO_NAME %>';
    <% }) %>

    function submitForm() {
    document.getElementById('modifyForm').submit();
    }
    function submitDel() {
    document.getElementById('deleteForm').submit();
  }

  </script>
</body>
</html>